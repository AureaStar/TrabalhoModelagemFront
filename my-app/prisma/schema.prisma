generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Cliente {
  id          Int      @id @default(autoincrement())
  instituicao String   @unique
  cnpj        String   @unique
  telefone    String
  responsavel String
  pedidos     Pedido[]
}

model Pedido {
  id            Int      @id @default(autoincrement())
  codigo_pedido String   @unique
  id_cliente    Int
  data          DateTime @default(now())
  status        String   @default("Pendente")
  preco         Float    @default(0)
  cliente       Cliente  @relation(fields: [id_cliente], references: [id])
}

model Produto {
  id             Int        @id @default(autoincrement())
  nome           String
  codigo_produto String     @unique
  categoria      String
  preco          Float
  unidade        String     @default("unidades")
  id_aquisicao   Int?
  id_estoque     Int?
  aquisicao      Aquisicao? @relation(fields: [id_aquisicao], references: [id])
  estoque        Estoque?   @relation(fields: [id_estoque], references: [id])
}

model Estoque {
  id         Int       @id @default(autoincrement())
  quantidade Float
  produtos   Produto[]
}

model Aquisicao {
  id            Int        @id @default(autoincrement())
  id_fornecedor Int
  entrada       DateTime   @default(now())
  quantidade    Float
  preco         Float
  desconto      Float      @default(0)
  observacoes   String?
  fornecedor    Fornecedor @relation(fields: [id_fornecedor], references: [id])
  produtos      Produto[]
}

model Fornecedor {
  id             Int         @id @default(autoincrement())
  nome           String
  email          String      @default("")
  cpf            String      @default("")
  telefone       String      @default("")
  tipo_associado String      @default("")
  endereco       String      @default("")
  area_atuacao   String      @default("")
  status         String      @default("Cooperado")
  aquisicoes     Aquisicao[]
}
