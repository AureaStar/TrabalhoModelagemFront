generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Cliente {
  id          Int      @id @default(autoincrement())
  instituicao String   @unique
  cnpj        String   @unique
  telefone    String
  responsavel String
  email       String   @default("")
  endereco    String   @default("")
  status      String   @default("ativo")
  pedidos     Pedido[]
}

model Produto {
  id             Int        @id @default(autoincrement())
  nome           String
  codigo_produto String     @unique
  categoria      String
  preco          Float
  id_aquisicao   Int?
  id_estoque     Int?
  unidade        String     @default("unidades")
  Aquisicao      Aquisicao? @relation(fields: [id_aquisicao], references: [id])
  Estoque        Estoque?   @relation(fields: [id_estoque], references: [id])
}

model Estoque {
  id         Int       @id @default(autoincrement())
  nome       String    @default("")
  categoria  String    @default("")
  preco      Float     @default(0)
  quantidade Float
  Produto    Produto[]
}

model Aquisicao {
  id            Int        @id @default(autoincrement())
  id_fornecedor Int
  entrada       DateTime   @default(now())
  quantidade    Float
  preco         Float
  desconto      Float      @default(0)
  observacoes   String?
  fornecedor    Fornecedor @relation(fields: [id_fornecedor], references: [id])
  Produto       Produto[]
}

model Pedido {
  id            Int      @id @default(autoincrement())
  codigo_pedido String   @unique
  id_cliente    Int
  data          DateTime @default(now())
  status        String   @default("Pendente")
  preco         Float    @default(0)
  cliente       Cliente  @relation(fields: [id_cliente], references: [id])
}

model Fornecedor {
  id             Int         @id @default(autoincrement())
  nome           String
  telefone       String      @default("")
  area_atuacao   String      @default("")
  cpf            String      @default("")
  email          String      @default("")
  endereco       String      @default("")
  status         String      @default("Cooperado")
  tipo_associado String      @default("")
  aquisicoes     Aquisicao[]
}
